# 登录/注册功能测试指南

## ✅ 已实现的功能

### 1. 导航栏按钮
- ✅ 未登录时显示：**登录** 和 **注册** 按钮
- ✅ 已登录时显示：**用户邮箱** 和 **退出** 按钮

### 2. 登录模态框
- ✅ 邮箱输入框
- ✅ 密码输入框
- ✅ 登录按钮
- ✅ 切换到注册链接
- ✅ 关闭按钮

### 3. 注册模态框
- ✅ 邮箱输入框
- ✅ 密码输入框（至少6位）
- ✅ 确认密码输入框
- ✅ 注册按钮
- ✅ 切换到登录链接
- ✅ 关闭按钮

### 4. 功能特性
- ✅ 表单验证（邮箱格式、密码长度、密码一致性）
- ✅ API 调用（连接后端 `/api/auth/signin` 和 `/api/auth/signup`）
- ✅ 本地存储（localStorage 保存用户信息）
- ✅ UI 状态切换（登录/未登录状态自动切换）
- ✅ 错误提示（登录/注册失败时显示错误信息）
- ✅ 自动登录（注册成功后自动登录）

## 🧪 测试步骤

### 测试1: 查看登录/注册按钮
1. 打开应用：`http://localhost:8000`
2. 检查导航栏右侧是否显示 **登录** 和 **注册** 按钮
3. ✅ 预期：未登录时应该看到这两个按钮

### 测试2: 打开登录模态框
1. 点击 **登录** 按钮
2. ✅ 预期：弹出登录模态框，包含邮箱和密码输入框

### 测试3: 切换到注册
1. 在登录模态框中点击 **立即注册** 链接
2. ✅ 预期：关闭登录框，打开注册框

### 测试4: 注册新用户
1. 点击导航栏的 **注册** 按钮
2. 填写信息：
   - 邮箱：`test@example.com`
   - 密码：`123456`（至少6位）
   - 确认密码：`123456`
3. 点击 **注册** 按钮
4. ✅ 预期：
   - 如果后端正常运行：注册成功，自动登录，显示用户邮箱
   - 如果后端未运行：显示错误提示

### 测试5: 登录已有用户
1. 点击 **登录** 按钮
2. 填写测试账号：
   - 邮箱：`admin@nju.edu.cn`
   - 密码：`123456`
3. 点击 **登录** 按钮
4. ✅ 预期：登录成功，导航栏显示邮箱和退出按钮

### 测试6: 退出登录
1. 点击导航栏的 **退出** 按钮
2. 确认退出
3. ✅ 预期：返回未登录状态，显示登录/注册按钮

### 测试7: 刷新页面保持登录
1. 登录后刷新页面
2. ✅ 预期：仍然保持登录状态（localStorage 持久化）

## 🎨 UI 特性

### 按钮样式
- **登录按钮**：渐变背景，悬停时上浮效果
- **注册按钮**：描边样式，悬停时填充渐变色
- **退出按钮**：次要按钮样式

### 表单样式
- 现代化输入框设计
- 聚焦时蓝色边框和阴影效果
- 输入框悬停时轻微上浮
- 完整的表单验证提示

### 模态框样式
- 玻璃态效果背景
- 居中显示
- 点击外部区域关闭
- 流畅的打开/关闭动画

## 📝 注意事项

1. **后端依赖**：需要后端服务运行在 `http://localhost:8000`
2. **API 端点**：
   - 注册：`POST /api/auth/signup`
   - 登录：`POST /api/auth/signin`
3. **数据格式**：
   ```json
   {
     "email": "user@example.com",
     "password": "password123"
   }
   ```
4. **响应格式**：
   ```json
   {
     "user_id": "uuid",
     "email": "user@example.com",
     "access_token": "jwt_token"
   }
   ```

## 🐛 故障排除

### 问题1: 按钮不显示
- 检查浏览器控制台是否有 JavaScript 错误
- 确认 `auth.js` 和 `app.js` 正确加载
- 清除浏览器缓存并刷新

### 问题2: 登录/注册失败
- 检查后端服务是否运行
- 查看浏览器 Network 面板的请求详情
- 确认 API_BASE_URL 配置正确

### 问题3: 模态框不关闭
- 检查是否有 JavaScript 错误
- 尝试点击模态框外部区域
- 刷新页面重试

## ✨ 已完成的改进

1. ✅ 添加登录/注册按钮到导航栏
2. ✅ 创建登录模态框
3. ✅ 创建注册模态框
4. ✅ 实现模态框切换逻辑
5. ✅ 实现登录 API 调用
6. ✅ 实现注册 API 调用
7. ✅ 实现退出登录功能
8. ✅ 添加完整的 CSS 样式
9. ✅ 实现 UI 状态管理
10. ✅ 添加表单验证

现在你可以在主界面看到登录和注册按钮了！🎉
