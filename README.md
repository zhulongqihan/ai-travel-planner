# AI æ—…è¡Œè§„åˆ’å¸ˆ (AI Travel Planner)

ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½æ—…è¡Œè§„åˆ’ Web åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·è½»æ¾è§„åˆ’æ—…è¡Œè¡Œç¨‹å’Œç®¡ç†é¢„ç®—ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### 1. æ™ºèƒ½è¡Œç¨‹è§„åˆ’
- ğŸ¤ **è¯­éŸ³è¾“å…¥**ï¼šæ”¯æŒè¯­éŸ³è¾“å…¥æ—…è¡Œéœ€æ±‚
- ğŸ“ **æ–‡å­—è¾“å…¥**ï¼šæ‰‹åŠ¨å¡«å†™è¯¦ç»†çš„æ—…è¡Œä¿¡æ¯
- ğŸ¤– **AI ç”Ÿæˆ**ï¼šä½¿ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼å¤§è¯­è¨€æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆä¸ªæ€§åŒ–æ—…è¡Œè·¯çº¿
- ğŸ“… **è¯¦ç»†è¡Œç¨‹**ï¼šåŒ…æ‹¬äº¤é€šã€ä½å®¿ã€æ™¯ç‚¹ã€é¤å…ç­‰å®Œæ•´ä¿¡æ¯

### 2. è´¹ç”¨é¢„ç®—ä¸ç®¡ç†
- ğŸ’° **é¢„ç®—åˆ†æ**ï¼šAI è‡ªåŠ¨åˆ†æå’Œä¼°ç®—å„é¡¹è´¹ç”¨
- ğŸ“Š **è´¹ç”¨è®°å½•**ï¼šè®°å½•å®é™…æ—…è¡Œå¼€é”€
- ğŸ“ˆ **é¢„ç®—å¯¹æ¯”**ï¼šå¯¹æ¯”é¢„ç®—ä¸å®é™…èŠ±è´¹
- ğŸ’¡ **æ™ºèƒ½å»ºè®®**ï¼šAI æä¾›é¢„ç®—ä¼˜åŒ–å»ºè®®

### 3. ç”¨æˆ·ç®¡ç†ä¸æ•°æ®å­˜å‚¨
- ğŸ” **æ³¨å†Œç™»å½•**ï¼šå®‰å…¨çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- â˜ï¸ **äº‘ç«¯åŒæ­¥**ï¼šæ—…è¡Œè®¡åˆ’è‡ªåŠ¨äº‘ç«¯å­˜å‚¨
- ğŸ“± **å¤šè®¾å¤‡è®¿é—®**ï¼šéšæ—¶éšåœ°æŸ¥çœ‹å’Œä¿®æ”¹è®¡åˆ’

### 4. åœ°å›¾å¯¼èˆª
- ğŸ—ºï¸ **é«˜å¾·åœ°å›¾**ï¼šé›†æˆé«˜å¾·åœ°å›¾ API
- ğŸ“ **æ™¯ç‚¹æ ‡è®°**ï¼šåœ¨åœ°å›¾ä¸Šæ ‡è®°æ—…è¡Œæ™¯ç‚¹
- ğŸš— **è·¯çº¿è§„åˆ’**ï¼šæŸ¥çœ‹å„æ™¯ç‚¹é—´çš„å¯¼èˆªè·¯çº¿

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **æ¡†æ¶**ï¼šFastAPI (Python)
- **æ•°æ®åº“**ï¼šSupabase
- **è®¤è¯**ï¼šSupabase Authentication
- **AI**ï¼šé˜¿é‡Œäº‘ç™¾ç‚¼ (DashScope)
- **è¯­éŸ³è¯†åˆ«**ï¼šé˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡ API

### å‰ç«¯
- **åŸºç¡€**ï¼šHTML5, CSS3, JavaScript
- **åœ°å›¾**ï¼šé«˜å¾·åœ°å›¾ API 2.0
- **è¯­éŸ³**ï¼šWeb Audio API + é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«

## ğŸ“¦ å®‰è£…æ­¥éª¤

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd ai-travel-planner
```

### 2. åç«¯è®¾ç½®

#### å®‰è£… Python ä¾èµ–

```bash
cd backend
pip install -r requirements.txt
```

#### é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.template` ä¸º `.env`ï¼Œå¹¶å¡«å†™ä»¥ä¸‹ API å¯†é’¥ï¼š

```bash
cp ../.env.template ../.env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# Supabaseé…ç½®
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-supabase-anon-key

# é˜¿é‡Œäº‘ç™¾ç‚¼é…ç½®
DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxx

# é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«é…ç½®ï¼ˆå¯é€‰ï¼‰
ALIYUN_SPEECH_APP_KEY=your-app-key
ALIYUN_ACCESS_KEY_ID=your-access-key-id
ALIYUN_ACCESS_KEY_SECRET=your-access-key-secret

# é«˜å¾·åœ°å›¾é…ç½®
AMAP_API_KEY=your-amap-key
AMAP_WEB_KEY=your-amap-web-key
```

### 3. é…ç½® Supabase æ•°æ®åº“

åœ¨ Supabase æ§åˆ¶å°åˆ›å»ºä»¥ä¸‹è¡¨ï¼š

#### travel_plans è¡¨

```sql
CREATE TABLE travel_plans (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID NOT NULL REFERENCES auth.users(id),
    destination TEXT NOT NULL,
    start_date DATE,
    end_date DATE,
    days INTEGER NOT NULL,
    budget NUMERIC(10, 2),
    travelers INTEGER,
    preferences TEXT,
    itinerary JSONB,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- å¯ç”¨è¡Œçº§å®‰å…¨
ALTER TABLE travel_plans ENABLE ROW LEVEL SECURITY;

-- åˆ›å»ºç­–ç•¥ï¼šç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
CREATE POLICY "Users can view own travel plans" ON travel_plans
    FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own travel plans" ON travel_plans
    FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own travel plans" ON travel_plans
    FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own travel plans" ON travel_plans
    FOR DELETE USING (auth.uid() = user_id);
```

#### expenses è¡¨

```sql
CREATE TABLE expenses (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID NOT NULL REFERENCES auth.users(id),
    plan_id UUID NOT NULL REFERENCES travel_plans(id) ON DELETE CASCADE,
    category TEXT NOT NULL,
    amount NUMERIC(10, 2) NOT NULL,
    description TEXT,
    date DATE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- å¯ç”¨è¡Œçº§å®‰å…¨
ALTER TABLE expenses ENABLE ROW LEVEL SECURITY;

-- åˆ›å»ºç­–ç•¥
CREATE POLICY "Users can view own expenses" ON expenses
    FOR SELECT USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own expenses" ON expenses
    FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own expenses" ON expenses
    FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own expenses" ON expenses
    FOR DELETE USING (auth.uid() = user_id);
```

### 4. é…ç½®é«˜å¾·åœ°å›¾

1. åœ¨ `frontend/index.html` ä¸­æ›¿æ¢é«˜å¾·åœ°å›¾ API Keyï¼š

```html
<script src="https://webapi.amap.com/maps?v=2.0&key=YOUR_AMAP_WEB_KEY"></script>
```

2. æ ¹æ®éœ€è¦é…ç½®å®‰å…¨å¯†é’¥ï¼ˆsecurityJsCodeï¼‰ã€‚

### 5. è¿è¡Œåº”ç”¨

#### å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
python main.py
```

åç«¯æœåŠ¡å°†è¿è¡Œåœ¨ `http://localhost:8000`

#### è®¿é—®å‰ç«¯

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼š
```
http://localhost:8000/static/index.html
```

æˆ–ä½¿ç”¨ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼š

```bash
cd frontend
python -m http.server 8080
```

ç„¶åè®¿é—® `http://localhost:8080`

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. æ³¨å†Œ/ç™»å½•
- ç‚¹å‡»å³ä¸Šè§’"æ³¨å†Œ"æŒ‰é’®åˆ›å»ºè´¦æˆ·
- æˆ–ä½¿ç”¨å·²æœ‰è´¦æˆ·ç™»å½•

### 2. åˆ›å»ºæ—…è¡Œè®¡åˆ’

#### æ–¹å¼ä¸€ï¼šè¯­éŸ³è¾“å…¥
1. ç‚¹å‡»"ğŸ¤ ç‚¹å‡»å¼€å§‹è¯­éŸ³è¾“å…¥"æŒ‰é’®
2. è¯´å‡ºä½ çš„æ—…è¡Œéœ€æ±‚ï¼Œä¾‹å¦‚ï¼š
   > "æˆ‘æƒ³å»æ—¥æœ¬ï¼Œ5å¤©ï¼Œé¢„ç®—1ä¸‡å…ƒï¼Œå–œæ¬¢ç¾é£Ÿå’ŒåŠ¨æ¼«ï¼Œå¸¦å­©å­"
3. AI ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å¡«å……è¡¨å•

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è¾“å…¥
1. å¡«å†™ç›®çš„åœ°ã€å¤©æ•°ã€é¢„ç®—ç­‰ä¿¡æ¯
2. ç‚¹å‡»"ç”Ÿæˆæ—…è¡Œè®¡åˆ’"

### 3. æŸ¥çœ‹å’Œç®¡ç†è®¡åˆ’
- åœ¨"æˆ‘çš„è®¡åˆ’"é¡µé¢æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„æ—…è¡Œè®¡åˆ’
- ç‚¹å‡»è®¡åˆ’å¡ç‰‡æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
- å¯ä»¥åˆ é™¤ä¸éœ€è¦çš„è®¡åˆ’

### 4. é¢„ç®—ç®¡ç†
- é€‰æ‹©ä¸€ä¸ªæ—…è¡Œè®¡åˆ’
- æ·»åŠ å®é™…èŠ±è´¹è®°å½•
- æŸ¥çœ‹é¢„ç®—åˆ†æå’Œ AI å»ºè®®

### 5. åœ°å›¾æŸ¥çœ‹
- åœ¨è¡Œç¨‹è¯¦æƒ…ä¸­ç‚¹å‡»æ™¯ç‚¹
- åœ¨åœ°å›¾ä¸ŠæŸ¥çœ‹ä½ç½®å’Œè·¯çº¿

## ğŸ”‘ è·å– API å¯†é’¥

### Supabase
1. è®¿é—® [supabase.com](https://supabase.com)
2. åˆ›å»ºæ–°é¡¹ç›®
3. åœ¨ Settings > API ä¸­è·å– URL å’Œ anon key

### é˜¿é‡Œäº‘ç™¾ç‚¼
1. è®¿é—® [é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°](https://dashscope.aliyun.com/)
2. å¼€é€šæœåŠ¡å¹¶åˆ›å»º API Key
3. é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼ˆæ¨è qwen-plus æˆ– qwen-maxï¼‰

### é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«
1. è®¿é—® [é˜¿é‡Œäº‘](https://www.aliyun.com/)
2. å¼€é€šè¯­éŸ³æœåŠ¡
3. åˆ›å»ºåº”ç”¨è·å– AppKey å’Œ AccessKey

### é«˜å¾·åœ°å›¾
1. è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°](https://lbs.amap.com/)
2. æ³¨å†Œå¼€å‘è€…è´¦å·
3. åˆ›å»ºåº”ç”¨è·å– Web æœåŠ¡ Key å’Œ JavaScript API Key

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®‰å…¨æ€§
- âŒ **åˆ‡å‹¿å°† API å¯†é’¥æäº¤åˆ° Git**
- âœ… å§‹ç»ˆä½¿ç”¨ `.env` æ–‡ä»¶å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- âœ… `.env` å·²æ·»åŠ åˆ° `.gitignore`
- âœ… æä¾›äº† `.env.template` ä½œä¸ºé…ç½®æ¨¡æ¿

### API ä½¿ç”¨é™åˆ¶
- æ³¨æ„å„æœåŠ¡çš„å…è´¹é¢åº¦å’Œè°ƒç”¨é™åˆ¶
- é˜¿é‡Œäº‘ç™¾ç‚¼ï¼šæŒ‰ token è®¡è´¹
- é˜¿é‡Œäº‘è¯­éŸ³ï¼šæœ‰å…è´¹é¢åº¦
- é«˜å¾·åœ°å›¾ï¼šæœ‰æ—¥è°ƒç”¨é‡é™åˆ¶

### æµè§ˆå™¨å…¼å®¹æ€§
- è¯­éŸ³åŠŸèƒ½éœ€è¦ HTTPS æˆ– localhost
- æ¨èä½¿ç”¨ Chromeã€Edge ç­‰ç°ä»£æµè§ˆå™¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-travel-planner/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ main.py                # FastAPI ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ database.py            # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ routers/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.py           # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ travel.py         # æ—…è¡Œè§„åˆ’è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ voice.py          # è¯­éŸ³è¯†åˆ«è·¯ç”±
â”‚   â”‚   â””â”€â”€ budget.py         # é¢„ç®—ç®¡ç†è·¯ç”±
â”‚   â””â”€â”€ requirements.txt       # Python ä¾èµ–
â”œâ”€â”€ frontend/                  # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.html            # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css         # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ app.js            # ä¸»åº”ç”¨é€»è¾‘
â”‚       â”œâ”€â”€ auth.js           # è®¤è¯é€»è¾‘
â”‚       â”œâ”€â”€ voice.js          # è¯­éŸ³è¯†åˆ«
â”‚       â””â”€â”€ map.js            # åœ°å›¾åŠŸèƒ½
â”œâ”€â”€ .env.template             # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore               # Git å¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md                # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ éƒ¨ç½²

### åç«¯éƒ¨ç½²ï¼ˆæ¨èå¹³å°ï¼‰
- **Railway**ï¼šè‡ªåŠ¨éƒ¨ç½² FastAPI åº”ç”¨
- **Heroku**ï¼šå…è´¹å±‚é€‚åˆå°å‹é¡¹ç›®
- **è…¾è®¯äº‘/é˜¿é‡Œäº‘**ï¼šä½¿ç”¨äº‘å‡½æ•°æˆ–å®¹å™¨æœåŠ¡

### å‰ç«¯éƒ¨ç½²
- **Vercel**ï¼šå¿«é€Ÿéƒ¨ç½²é™æ€æ–‡ä»¶
- **Netlify**ï¼šæ”¯æŒè‡ªåŠ¨æ„å»º
- **GitHub Pages**ï¼šå…è´¹é™æ€ç½‘ç«™æ‰˜ç®¡

### ç¯å¢ƒå˜é‡é…ç½®
éƒ¨ç½²æ—¶éœ€è¦åœ¨å¹³å°ä¸Šé…ç½®æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼ˆä¸ `.env` æ–‡ä»¶ç›¸åŒï¼‰ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ Issue åé¦ˆã€‚

---

**ç¥ä½ æ—…è¡Œæ„‰å¿«ï¼ğŸŒâœˆï¸**



